#ifndef DBHANDLE_H
#define DBHANDLE_H

# include "headers.h"

//read exe file as binary
string& getFile(string path) {
	string *s = new string;
	s->reserve(1024);
	fstream fp;

	fp.open(path,ios::in | ios::binary);
	string line;
	while(fp >> line){
		s->append(line);
	}
	fp.close();
	return *s;
}

//read csv file
bool readCSV (string x){
	vector<vector<string>> content;
	vector<string> row;
	string line, word;
 
	fstream file ("db.csv", ios::in);
	if(file.is_open())
	{
		while(getline(file, line))
		{
			row.clear();
 
			stringstream str(line);
 
			while(getline(str, word, ','))
				row.push_back(word);
			content.push_back(row);
		}
	}
	for(unsigned int i=0;i<content.size();i++)
	{
		for(unsigned int j=0;j<content[i].size();j++)
		{
			if(x == content[i][j]){
				return true;
			}
		}
	}
	return false;
}

//create and write csv file as database of scanner
void newCSV (string x){
	fstream fout;
    fout.open("db.csv", ios::out | ios::app);
    fout<<x<<'\n';
}

#endif // DBHandle_H